// Initialize the map
const map = L.map('map').setView([37.5, -119.5], 6); 

// Add a tile layer (e.g., OpenStreetMap or another provider)
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

// Function to fetch wildfire data and add markers
async function addWildfireMarkers() {
  const apiUrl = "https://api.weather.gov/alerts/active?status=actual&message_type=alert"; // Adjust URL if needed
  
  try {
    const response = await fetch(apiUrl);
    const data = await response.json();

    // Loop through each wildfire event
    data.features.forEach(fire => {
      const coords = fire.geometry.coordinates;
      const props = fire.properties;

      if (coords) {
        const [lng, lat] = coords; // GeoJSON uses [longitude, latitude]

        // Create a Leaflet marker
        const marker = L.marker([lat, lng]).addTo(map);

        // Attach a popup with wildfire details
        marker.bindPopup(`
          <b>${props.name || "Unnamed Wildfire"}</b><br>
          🔥 <strong>Status:</strong> ${props.status} <br>
          📏 <strong>Size:</strong> ${props.size || "Unknown"} <br>
          🕒 <strong>Last Updated:</strong> ${new Date(props.updated).toLocaleString()} 
        `);
      }
    });
  } catch (error) {
    console.error("Error fetching wildfire data:", error);
  }
}

// Call function to load wildfire markers
addWildfireMarkers();
